<%- include('.././header.ejs') %>
<%- include('./layout/navbar.ejs') %>
<!-- Assuming you have a table to display the cart items -->
<h2>Total Amount: â‚± <span class="cart-amount"><%= cartAmount %></span></h2>
<!-- Help me to route my reservation -->
<% if (numberOfItems !== 0) { %>
    <h2><a href="/reservation/<%= cartID %>">Reservation</a></h2> 
<% } %>
<table class="table">
    <thead>
        <tr>
            <th scope="col">Product</th>
            <th scope="col">Quantity</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        <!-- Loop through cart items and display each item -->
        <% cartItems.forEach(item => { %>
        <tr>
            <td><%= item.product.name %></td>
            <td>
                <!-- Display the current quantity -->
                <%= item.quantity %>
                <!-- Increase and decrease buttons -->
                <form action="/update-cart" method="post" class="d-inline">
                    <input type="hidden" name="productId" value="<%= item.product._id %>">
                    <input type="hidden" name="restaurantId" value="<%= item.product.restaurant %>">
                    <input type="hidden" name="customerId" value="<%= customer._id %>">
                    <button type="submit" name="action" value="increase" class="btn btn-sm btn-primary mx-1">+</button>
                    <button type="submit" name="action" value="decrease" class="btn btn-sm btn-warning mx-1">-</button>
                </form>
            </td>
            <td>
                <!-- Add a form for removing the product from the cart if needed -->
                <form action="/remove-from-cart" method="post" class="d-inline">
                    <input type="hidden" name="productId" value="<%= item.product._id %>">
                    <input type="hidden" name="restaurantId" value="<%= item.product.restaurant %>">
                    <button type="submit" class="btn btn-sm btn-danger">Remove</button>
                </form>
            </td>
        </tr>
        <% }); %>
    </tbody>
</table>
<script src="/js/amountFormatter.js"></script>             
<%- include('.././footer.ejs') %>
